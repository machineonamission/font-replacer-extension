// https://www.npmjs.com/package/css-font-parser
const states={VARIATION:1,LINE_HEIGHT:2,FONT_FAMILY:3,BEFORE_FONT_FAMILY:4,AFTER_OBLIQUE:5,ESCAPING:6,IDENTIFIER:7,HEXESCAPING:8};function isValidIdentifier(t){return!/^(-?\d|--)/.test(t)}function parseIdentifier(t){const e=[];let s="",i="",n=states.IDENTIFIER;for(let a,l=0;a=t.charAt(l);l++)if(/[a-zA-Z\d\xa0-\uffff_-]/.test(a)&&n===states.IDENTIFIER)s+=a;else if("\\"===a&&n===states.IDENTIFIER)n=states.ESCAPING;else if(" "===a&&n===states.IDENTIFIER){if(""!==s){if(!isValidIdentifier(s))return null;e.push(s),s=""}}else if(n===states.ESCAPING)/[0-9a-f]/i.test(a)?(i+=a,n=states.HEXESCAPING):(s+=a,n=states.IDENTIFIER);else{if(n!==states.HEXESCAPING)return null;/[0-9a-f]/i.test(a)&&i.length<6?i+=a:(s+=String.fromCodePoint(parseInt(i,16)),s+=a,i="",n=states.IDENTIFIER)}if(""!==s){if(!isValidIdentifier(s))return null;e.push(s)}return e.join(" ")}function parse(t,e){let s=e,i="";const n={"font-family":[]};for(let e,a=0;e=t.charAt(a);a+=1)if(s!==states.BEFORE_FONT_FAMILY||'"'!==e&&"'"!==e)if(s===states.FONT_FAMILY&&","===e)s=states.BEFORE_FONT_FAMILY,i="";else if(s===states.BEFORE_FONT_FAMILY&&","===e){const t=parseIdentifier(i);t&&n["font-family"].push(t),i=""}else if(s===states.AFTER_OBLIQUE&&" "===e)/^(?:\+|-)?(?:[0-9]*\.)?[0-9]+(?:deg|grad|rad|turn)$/.test(i)?(n["font-style"]+=" "+i,i=""):a-=1,s=states.VARIATION;else if(s!==states.VARIATION||" "!==e&&"/"!==e)s===states.LINE_HEIGHT&&" "===e?(/^(?:\+|-)?([0-9]*\.)?[0-9]+(?:em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)?$/.test(i)&&(n["line-height"]=i),s=states.BEFORE_FONT_FAMILY,i=""):i+=e;else{if(/^(?:(?:xx|x)-large|(?:xx|s)-small|small|large|medium)$/.test(i)||/^(?:larg|small)er$/.test(i)||/^(?:\+|-)?(?:[0-9]*\.)?[0-9]+(?:em|ex|ch|rem|vh|vw|vmin|vmax|px|mm|cm|in|pt|pc|%)$/.test(i))s="/"===e?states.LINE_HEIGHT:states.BEFORE_FONT_FAMILY,n["font-size"]=i;else if(/^italic$/.test(i))n["font-style"]=i;else if(/^oblique$/.test(i))n["font-style"]=i,s=states.AFTER_OBLIQUE;else if(/^small-caps$/.test(i))n["font-variant"]=i;else if(/^(?:bold(?:er)?|lighter|normal)$/.test(i))n["font-weight"]=i;else if(/^[+-]?(?:[0-9]*\.)?[0-9]+(?:e[+-]?(?:0|[1-9][0-9]*))?$/.test(i)){const t=parseFloat(i);t>=1&&t<=1e3&&(n["font-weight"]=i)}else/^(?:(?:ultra|extra|semi)-)?(?:condensed|expanded)$/.test(i)&&(n["font-stretch"]=i);i=""}else{let l=a+1;do{if(l=t.indexOf(e,l)+1,!l)return null}while("\\"===t.charAt(l-2));n["font-family"].push(t.slice(a+1,l-1).replace(/\\('|")/g,"$1")),a=l-1,s=states.FONT_FAMILY,i=""}if(s===states.FONT_FAMILY&&!/^\s*$/.test(i))return null;if(s===states.BEFORE_FONT_FAMILY){const t=parseIdentifier(i);t&&n["font-family"].push(t)}return n}function parseFontFamily(t){const e=parse(t,states.BEFORE_FONT_FAMILY);return null!==e?e["font-family"]:null}function parseFont(t){const e=parse(t,states.VARIATION);return null!==e&&e["font-size"]&&e["font-family"].length?e:null}